<!doctype html>
<html xmlns:th="http://www.thymeleaf.org"  lang="en">
<head>
    <meta charset="utf-8">
    <title th:text="${title}">Bulletin</title>
    <style>
        /* Minimal print-friendly styles — tune to taste */
        @page { margin: 20mm; }
        body { font-family: "Helvetica", Arial, sans-serif; color: #222; font-size: 12px; line-height: 1.4; }
        .cover { text-align: center; margin-bottom: 18px; }
        .cover h1 { font-size: 22px; margin: 6px 0; color: #0b3d91; }
        .cover .meta { font-size: 11px; color: #666; margin-bottom: 12px; }

        .section { margin-bottom: 14px; }
        .section h2 { font-size: 16px; margin: 0 0 6px 0; color: #1f2937; }
        .section h3 { font-size: 14px; margin: 0 0 4px 0; color: #111827; }
        .small { font-size: 11px; color: #555; }

        ul.activities { padding-left: 18px; margin: 6px 0; }
        ul.activities li { margin: 2px 0; font-size: 12px; }

        .announcement { border-left: 3px solid #e5e7eb; padding-left: 8px; margin-bottom: 8px; }
        .on-duty { background: #f9fafb; padding: 8px; border-radius: 4px; margin-bottom: 8px; }
        hr { border: none; border-top: 1px solid #e5e7eb; margin: 12px 0; }
    </style>
</head>
<body>
<div class="cover">
    <h1 th:text="${cover.documentName}">Church Bulletin</h1>
    <div class="meta">
        <div th:text="${bulletinDate}">Date</div>
        <div th:if="${cover.welcomeMessage}" th:text="${cover.welcomeMessage}" class="small"></div>
    </div>
</div>

<!-- Content (raw HTML allowed) -->
<div class="section">
    <div th:utext="${content}">Bulletin content goes here...</div>
</div>

<hr>

<!-- Schedules / Order of Worship -->
<div class="section" th:if="${schedules}">
    <h2>Order of Worship</h2>
    <div th:each="s : ${schedules}">
        <div class="section" style="margin-bottom: 10px;">
            <h3 th:text="${s.title}">Service Title</h3>
            <div class="small" th:text="'Date: ' + ${s.scheduledDate} + '  |  ' + ${s.startTime} + ' - ' + ${s.endTime}">Date & time</div>

            <div th:if="${s.scheduledActivities}">
                <ul class="activities">
                    <li th:each="entry : ${s.scheduledActivities.entrySet()}">
                        <span th:text="${entry.key}">Activity</span>
                        <span> : </span>
                        <span th:text="${entry.value}">Person / details</span>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>

<hr>

<!-- Announcements -->
<div class="section" th:if="${announcements}">
    <h2>Announcements</h2>
    <div th:each="a : ${announcements}">
        <div class="announcement">
            <h3 th:text="${a.title}">Announcement Title</h3>
            <div th:utext="${a.content}">Announcement content</div>
        </div>
    </div>
</div>

<!-- On Duty list -->
<div class="section" th:if="${onDutyList}">
    <h2>On Duty</h2>
    <div th:each="d : ${onDutyList}">
        <div class="on-duty">
            <div><strong th:text="${d.role}">Role</strong> <span th:if="${d.activity}"> — <span th:text="${d.activity}">Activity</span></span></div>
            <div class="small" th:text="'Participants: ' + ${#strings.arrayJoin(d.participates, ', ')}">participants</div>
            <div class="small" th:text="'Date: ' + ${d.date}">date</div>
        </div>
    </div>
</div>

<hr>

<div class="small">Generated by CMS • <span th:text="${generatedAt}">timestamp</span></div>
</body>
</html>
